<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Animation Logo</title>
  <!-- Préchargement des images -->
  <link rel="prefetch" href="/settings-icon.heic">
  <link rel="prefetch" href="/icon.png">
  <link rel="prefetch" href="/XP_2.png">
  <link rel="prefetch" href="/verification_maj.png">
  <link rel="prefetch" href="/Willy.html">
  <link rel="prefetch" href="/Doudou.html">
  <link rel="prefetch" href="/Cocobi.html">
  <link rel="prefetch" href="/Oiseau.html">
  <link rel="prefetch" href="/Grours.html">
  <link rel="prefetch" href="/Baleine.html">
  <link rel="prefetch" href="/Diva.html">
  <link rel="prefetch" href="/Poulpy.html">
  <link rel="prefetch" href="/Coeur.html">
  <link rel="prefetch" href="/Colorina.html">
  <link rel="prefetch" href="/Potion-1.png">
  <link rel="prefetch" href="/Amulette-1.png">
  <link rel="prefetch" href="/recompenses.html">
  <link rel="prefetch" href="/gratuite-rec.png">
  <link rel="prefetch" href="/armure-1.png">
  <link rel="prefetch" href="/elixir-1.png">
  <link rel="prefetch" href="/epee-1.png">
  <link rel="prefetch" href="/quetes.html">
  <link rel="prefetch" href="/Icon-menu.png">
  <link rel="prefetch" href="/Icon-parametre.png">
  <link rel="prefetch" href="/Icon-personnage.png">
  <link rel="prefetch" href="/Icon-magazin.png">
  <link rel="prefetch" href="/Icon-amelioration.png">
  <link rel="prefetch" href="/trophy-icon-3.png">
  <link rel="prefetch" href="/user-icon.png">
  <link rel="prefetch" href="/fin_partie_survie.html">
  <link rel="prefetch" href="/combat-survie.html">
  <link rel="prefetch" href="/special.png">
  <link rel="prefetch" href="/attaque.png">
  <link rel="prefetch" href="/inventaire.png">
  <link rel="prefetch" href="/defense.png">
  <link rel="prefetch" href="/actualites.html">
  <link rel="prefetch" href="/passe_fond.jpeg">
  <link rel="prefetch" href="/Cape_de_l'ombre.png">
  <link rel="prefetch" href="/Crystale_de_renouveau.png">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      /* Ajustement de la hauteur du body */
      margin: 0;
      background: radial-gradient(circle, #e0e0e0, #b0b0b0);
      overflow: hidden;
      perspective: 1000px;
    }

    #container {
      position: absolute;
      /* Position absolue pour centrer le conteneur */
      width: 150px;
      height: 150px;
      background-color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      animation: drop 1s ease forwards, fadeAndLift 2s ease 3s forwards;
      transform-origin: top;
      border-radius: 20px;
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.2);
    }

    #logo {
      font-size: 100px;
      color: #fff;
      font-weight: bold;
      transform: scale(0);
      animation: growAndShine 2s ease forwards 1s;
    }

    @keyframes drop {
      0% {
        transform: translateY(-100vh) scale(0.5) rotateX(90deg);
        opacity: 0;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0.0);
      }

      50% {
        transform: translateY(0) scale(1.2) rotateX(45deg);
        opacity: 1;
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.8);
      }

      100% {
        transform: translateY(0) scale(1) rotateX(0);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      }
    }

    @keyframes growAndShine {
      0% {
        transform: scale(0);
        filter: brightness(1);
      }

      50% {
        transform: scale(1.5);
        filter: brightness(2);
      }

      100% {
        transform: scale(1);
        filter: brightness(1);
      }
    }

    @keyframes fadeAndLift {
      0% {
        background: linear-gradient(to bottom, #333 0%, #333 100%);
        opacity: 1;
        transform: translateY(0);
      }

      100% {
        background: linear-gradient(to bottom, #333 0%, #e0e0e0 100%);
        opacity: 0;
        transform: translateY(-150px);
      }
    }
  </style>
  <link rel="manifest" href="/manifest.json">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-performance-compat.js"></script>

</head>

<body>
  <div id="rules-container"
    style="display: flex; justify-content: center; align-items: center; position: absolute; top: 0; left: 0; width: 100%; height: 80vh; background-color: rgba(0, 0, 0, 0.8); z-index: 10;">
    <div
      style="background-color: white; padding: 20px; border-radius: 10px; width: 80%; max-width: 500px; text-align: center;">
      <h2>Règles de Willy0’s Parallel Arena</h2>
      <p>Veuillez lire et accepter les règles avant de jouer :</p>
      <ul style="text-align: left; max-height: 300px; overflow-y: scroll; padding-left: 20px;">
        <li><strong>Accès au jeu :</strong> Willy0’s Parallel Arena est un jeu de combat au tour par tour totalement
          gratuit. Il est accessible à tous, sans achats intégrés.</li>
        <li><strong>Utilisation du compte :</strong> Chaque joueur est responsable de la sécurité de son compte. Ne
          partagez pas vos informations de connexion.</li>
        <li><strong>Fair-play :</strong> Il est strictement interdit de tricher ou d'exploiter des failles du jeu pour
          obtenir un avantage injuste. Toute utilisation de logiciels tiers, bots, ou scripts automatisés est interdite.
        </li>
        <li><strong>Mises à jour :</strong> Le jeu est régulièrement mis à jour afin d'améliorer l'expérience et de
          corriger les bugs. Veuillez vous assurer que vous utilisez toujours la dernière version du jeu.</li>
        <li><strong>Boutique :</strong> Bien que le jeu dispose d'une boutique, tous les contenus disponibles sont
          gratuits et ne nécessitent aucun achat.</li>
        <li><strong>Respect des règles du jeu :</strong> Même s'il n'y a pas d'interactions avec d'autres joueurs pour
          le moment, il est important de respecter le déroulement naturel des combats contre les bots.</li>
        <li><strong>Collecte de données :</strong> Nous collectons certaines données pour améliorer votre expérience de
          jeu et à des fins de statistiques. Ces données sont recueillies dans le respect de votre vie privée et
          conformément à notre politique de confidentialité.</li>
        <li><strong>Sanctions :</strong> Tout manquement aux présentes règles peut entraîner des avertissements, des
          suspensions temporaires ou permanentes du compte.</li>
      </ul>
      <label>
        <input type="checkbox" id="accept-rules" /> J'accepte les règles.
      </label>
      <br />
      <button id="start-game" disabled
        style="margin-top: 20px; padding: 10px 20px; background-color: #333; color: white; border: none; border-radius: 5px;">Commencer</button>
    </div>
  </div>

  <div id="container" style="display: none;">
    <div id="logo">S</div>
  </div>
  <script src="localStorage.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAwIIKfoYwdtFD63yKhVggZOAnooQion-M",
      authDomain: "willy0s-parallel-arena.firebaseapp.com",
      databaseURL: "https://willy0s-parallel-arena-default-rtdb.firebaseio.com",
      projectId: "willy0s-parallel-arena",
      storageBucket: "willy0s-parallel-arena.appspot.com",
      messagingSenderId: "683284732830",
      appId: "1:683284732830:web:ef7fb4cf1c88f73eead48f",
      measurementId: "G-85B8R4NKNM"
    };


    firebase.initializeApp(firebaseConfig);


    const database = firebase.database();


    const maintenanceStartRef = database.ref('maintenance/start');
    const maintenanceEndRef = database.ref('maintenance/end');


    function checkMaintenance() {
      Promise.all([maintenanceStartRef.once('value'), maintenanceEndRef.once('value')])
        .then(([startSnapshot, endSnapshot]) => {
          const maintenanceStart = new Date(startSnapshot.val()); // Convertir la date de début
          const maintenanceEnd = new Date(endSnapshot.val()); // Convertir la date de fin
          const currentTime = new Date(); // Heure actuelle

          // Vérifier si la maintenance est active
          if (maintenanceStart && maintenanceEnd && currentTime >= maintenanceStart && currentTime <= maintenanceEnd) {
            window.location.href = 'maintenance.html'; // Rediriger vers maintenance.html si la maintenance est active
          }
        })
        .catch(error => {
          console.error("Erreur lors de la récupération des données de maintenance:", error);
        });
    }

    checkMaintenance();

    // Vérifier la maintenance toutes les 10 secondes
    setInterval(checkMaintenance, 10000); // Appelle la fonction toutes les 10 secondes
    document.getElementById('container').addEventListener('animationend', function (event) {
      if (event.animationName === 'fadeAndLift') {
        window.location.href = 'maintenance.html';
      } else {
      // Rediriger vers le menu principal si la maintenance n'est pas active ou l'heure est passée
      document.getElementById('container').addEventListener('animationend', function (event) {
        if (event.animationName === 'fadeAndLift') {
          window.location.href = 'menu_principal.html';
        }
      });
    }});
  
    const rulesContainer = document.getElementById('rules-container');
    const startGameButton = document.getElementById('start-game');
    const acceptRulesCheckbox = document.getElementById('accept-rules');
    const gameContainer = document.getElementById('container');

    // Vérifier si l'utilisateur a déjà accepté les règles
    const rulesAccepted = localStorage.getItem('rulesAccepted');

    if (rulesAccepted === 'true') {
      // Si les règles ont été acceptées, lancer directement l'animation
      rulesContainer.style.display = 'none';
      gameContainer.style.display = 'flex';
    } else {
      // Sinon, afficher les règles
      rulesContainer.style.display = 'flex';
      gameContainer.style.display = 'none';
    }

    acceptRulesCheckbox.addEventListener('change', function () {
      startGameButton.disabled = !this.checked;
    });

    startGameButton.addEventListener('click', function () {
      // Sauvegarder l'acceptation des règles dans le localStorage
      localStorage.setItem('rulesAccepted', 'true');

      // Cacher les règles et lancer l'animation du logo
      rulesContainer.style.display = 'none';
      gameContainer.style.display = 'flex';
    });
    const connection = JSON.parse(localStorage.getItem('connection')); // Transformer la chaîne en objet
    document.getElementById('container').addEventListener('animationend', function (event) {
      if (event.animationName === 'fadeAndLift') {
        if (!connection || !connection.est_connecte) { // Vérifier si l'objet existe et la connexion est valide
          window.location.href = 'connection.html';
        } else {
          window.location.href = 'menu_principal.html';
        }
      }
    });
  </script>
  <script>

    

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').then((registration) => {
          console.log('Service Worker registered with scope:', registration.scope);
        }).catch((error) => {
          console.log('Service Worker registration failed:', error);
        });
      });
    }

    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("firebase-messaging-sw.js")
            .then((registration) => {
                console.log("✅ Service Worker enregistré :", registration);
            })
            .catch((error) => {
                console.error("❌ Erreur Service Worker :", error);
            });
    }

    

    function getAIData() {
      let AIData_weekend = localStorage.getItem('historicalData_weekend');
      
      let AIData = localStorage.getItem('historicalData');
      if (!AIData) {
        AIData = [[0,0,100,0,0,0,100],[1,0,100,0,0,0,100],[0,1,100,1,1,0,100],[1,1,100,0,1,0,100],[0,1,100,2,1,0,80],[0,1,100,0,1,0,80],[0,1,100,0,1,0,80],[0,0,100,0,0,0,80],[1,0,80,0,0,0,80],[1,0,80,0,0,0,60],[0,0,80,2,0,0,60],[0,0,80,0,1,0,60],[0,1,80,1,1,0,60],[0,1,80,0,1,0,40],[0,1,80,0,1,0,40],[0,1,60,0,1,0,40],[1,1,60,0,1,0,40],[0,1,60,1,1,0,40],[1,1,60,0,1,0,40],[0,1,60,2,1,0,20],[0,1,60,0,1,0,20],[0,1,60,0,1,0,20],[0,0,100,0,0,0,100],[1,0,100,0,0,0,100],[0,1,100,1,1,0,100],[1,1,100,0,0,0,100],[0,1,100,2,0,0,100],[0,1,100,0,0,0,80],[0,1,100,0,0,0,80],[0,1,100,1,1,0,80],[0,1,100,0,0,0,80],[0,1,80,0,0,0,80],[1,1,80,0,0,0,80],[0,0,80,2,0,0,60],[0,0,80,0,1,0,60],[0,0,80,0,0,0,60],[0,0,60,0,0,0,60],[1,0,60,0,0,4,60],[1,0,60,0,0,4,60],[0,1,60,1,1,0,60],[1,1,60,0,1,0,60],[0,1,60,2,1,0,40],[0,1,60,0,1,0,40],[0,1,40,0,1,0,40],[0,0,40,0,0,0,40],[1,0,40,0,0,0,20],[0,0,40,2,0,0,20],[0,0,40,0,0,0,20],[0,1,20,1,1,0,20],[0,1,20,0,0,0,20],[0,1,20,0,0,0,20],[0,0,100,0,0,0,100],[1,0,100,0,0,0,100],[0,1,100,1,1,0,100],[1,1,100,0,0,0,100],[0,1,100,2,0,0,80],[0,1,100,0,0,0,80],[0,1,100,0,0,0,80],[0,1,80,1,1,0,80],[0,1,80,0,1,0,80],[0,1,80,0,1,0,80],[1,1,80,0,1,0,60],[0,1,80,1,1,0,60],[1,1,80,0,1,0,60],[0,1,60,2,1,0,60],[0,1,60,0,1,0,40],[0,1,60,0,1,0,40],[0,1,60,1,1,0,40],[0,1,60,0,1,0,40],[0,1,60,0,1,0,40],[1,1,40,0,0,0,40],[0,0,40,2,0,0,20],[0,0,40,0,0,0,20],[0,0,40,0,0,4,20],[0,0,40,0,0,2,20],[0,1,20,1,1,1,20],[0,1,20,0,1,0,20],[0,0,100,0,0,0,100],[1,0,100,0,0,0,100],[0,1,100,1,1,0,100],[1,1,100,0,1,0,100],[1,1,100,0,1,0,100],[0,1,100,2,1,0,80],[0,0,100,0,1,0,80],[0,1,80,1,1,0,80],[0,1,80,0,1,0,80],[0,1,80,0,1,0,80],[0,1,80,0,1,0,80],[1,0,80,0,0,0,80],[0,0,80,2,0,0,60],[0,0,60,0,0,0,60],[0,0,60,0,0,4,60],[0,0,60,0,0,2,60],[0,1,60,1,1,1,60],[0,1,60,0,1,0,60],[1,1,60,0,1,0,40],[0,1,60,2,0,0,40],[0,0,40,0,0,0,40],[0,0,40,0,0,0,40],[0,0,40,0,0,0,20],[0,1,40,1,1,0,20],[0,1,40,0,0,0,20],[1,1,40,0,0,0,20],[0,0,100,0,0,0,100],[1,0,100,0,0,0,100],[0,1,100,1,1,0,100],[1,1,100,0,0,0,100],[0,1,100,2,0,0,100],[0,0,100,0,0,0,80],[0,0,100,0,0,4,100],[0,0,100,0,0,2,80],[0,1,80,1,1,1,80],[0,1,80,0,1,0,80],[1,1,80,0,1,0,80],[0,1,80,2,0,0,60],[0,1,80,0,0,0,60],[0,0,60,0,0,0,60],[0,0,60,0,0,4,60],[1,0,60,0,0,1,60],[0,1,60,1,0,0,60],[1,1,60,0,1,0,60],[0,1,60,2,1,0,40],[0,1,60,0,1,0,40],[0,1,60,0,1,0,40],[0,1,40,0,0,0,40],[1,0,40,0,0,0,40],[0,0,40,2,0,0,20],[0,0,40,0,0,0,20],[0,1,40,1,1,0,20],[0,1,40,0,0,0,20],[0,1,20,0,0,0,20]];
        localStorage.setItem('historicalData', JSON.stringify(AIData));
      }
    }
    getAIData();


    function getUserData() {
      let userData = localStorage.getItem('userData');
      if (!userData) {
        // Initialiser les données utilisateur si elles n'existent pas encore
        userData = {
          pass_XP: 0,
          pass_level: 0,
          nbr_perso: 2,
          victoires: 0,
          defaites: 0,
          manches_max: 0,
          XP_jour: 0,
          gagnant: '',
          fin_manche: 0,
          fin_xp: 0,
          fin_argent: 0,
          fin_trophees: 0,
          trophees: 0,
          argent: 0,
          VICTOIRE: false,
          version: '2.5',
          recompense: 0,
          perso_recompense: 0,
          xp_du_jour: 0,
          Willy: 1,
          Willy_XP: 0,
          Willy_Level: 1,
          Willy_boost: 0,
          Cocobi: 1,
          Cocobi_XP: 0,
          Cocobi_Level: 1,
          Cocobi_boost: 0,
          Oiseau: 0,
          Oiseau_XP: 0,
          Oiseau_Level: 1,
          Oiseau_boost: 0,
          Grours: 0,
          Grours_XP: 0,
          Grours_Level: 1,
          Grours_boost: 0,
          Baleine: 0,
          Baleine_XP: 0,
          Baleine_Level: 1,
          Baleine_boost: 0,
          Doudou: 0,
          Doudou_XP: 0,
          Doudou_Level: 1,
          Doudou_boost: 0,
          Coeur: 0,
          Coeur_XP: 0,
          Coeur_Level: 1,
          Coeur_boost: 0,
          Diva: 0,
          Diva_XP: 0,
          Diva_Level: 1,
          Diva_boost: 0,
          Poulpy: 0,
          Poulpy_XP: 0,
          Poulpy_Level: 1,
          Poulpy_boost: 0,
          Colorina: 0,
          Colorina_XP: 0,
          Colorina_Level: 1,
          Colorina_boost: 0,
          Rosalie: 0,
          Rosalie_XP: 0,
          Rosalie_Level: 1,
          Rosalie_boost: 0,
          Sboonie: 0,
          Sboonie_XP: 0,
          Sboonie_Level: 1,
          Sboonie_boost: 0,
          Inconnu: 0,
          Inconnu_XP: 0,
          Inconnu_Level: 1,
          Inconnu_boost: 0,
          Double_XP: 5,
          Double_XP_acheté: 0,
          Potion_de_Santé_acheté: 0,
          Amulette_de_Régénération_acheté: 0,
          epee_tranchante_acheté: 0,
          elixir_puissance_acheté: 0,
          armure_fer_acheté: 0,
          bouclier_solide_acheté: 0,
          Cape_acheté: 0,
          crystal_acheté: 0,
          lastDoubleXPCheck: 0,
          lastFraudeReset: 0,
          boutique_recompense: false,

          semaine1: false,


          semaine2: false,


          semaine3: false,


          semaine4: false,



          semaine5: false,

          semaine6: false,

          crystaux_parrallels: 0,

          quetes_jour: false,

          quete1_type: "",
          quete1_text: "",
          quete1_total: "",
          quete1_current: "",
          quete1_character: "",

          quete2_type: "",
          quete2_text: "",
          quete2_total: "",
          quete2_current: "",
          quete2_character: "",

          quete3_type: "",
          quete3_text: "",
          quete3_total: "",
          quete3_current: "",
          quete3_character: "",

          partie_commencee: false,
          parties_test: 0,
          parties_weekend_test: 0,
        };

        localStorage.setItem('userData', JSON.stringify(userData));
      }
    };
    getUserData();
  </script>


</body>

</html>